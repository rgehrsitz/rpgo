<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>FERS Retirement Planning Analysis</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:20px; background:#f8f9fa; }
header { background:#2c3e50; color:#fff; padding:20px; border-radius:8px; }
section { background:#fff; padding:16px 20px; margin:20px 0; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,.08); }
h1 { margin:0 0 4px 0; font-weight:400; }
.table { width:100%; border-collapse:collapse; }
.table th, .table td { padding:6px 8px; text-align:right; }
.table th:first-child, .table td:first-child { text-align:left; }
.table thead { background:#e5eef5; }
.badge { display:inline-block; background:#3498db; color:#fff; padding:2px 6px; border-radius:4px; font-size:12px; }
</style>
</head>
<body>
<header>
  <h1>FERS Retirement Planning Analysis</h1>
  <div class="subtitle">Scenarios Evaluated: {{len .Scenarios}}</div>
</header>
{{if .Assumptions}}
<section>
  <h2>Key Assumptions</h2>
  <ul>
  {{range .Assumptions}}
    <li>{{.}}</li>
  {{end}}
  </ul>
</section>
{{end}}
<section>
  <h2>Scenario Summary</h2>
  <table class="table">
    <thead><tr><th>Scenario</th><th>First Year Net</th><th>Year 5</th><th>Year 10</th><th>Total Lifetime Income</th><th>Success Rate</th><th>TSP Longevity</th><th>Final TSP Balance</th></tr></thead>
    <tbody>
      {{range .Scenarios}}
      <tr>
        <td>{{.Name}}</td>
        <td>{{curr .FirstYearNetIncome}}</td>
        <td>{{curr .Year5NetIncome}}</td>
        <td>{{curr .Year10NetIncome}}</td>
        <td>{{curr .TotalLifetimeIncome}}</td>
        <td>{{pct .SuccessRate}}</td>
        <td>{{.TSPLongevity}}</td>
        <td>{{curr .FinalTSPBalance}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
</section>
<section>
  <h2>Calendar Year Comparison (Apples-to-Apples)</h2>
  <table class="table">
    <thead><tr><th>Scenario</th><th>2030 Net Income</th><th>2035 Net Income</th><th>2040 Net Income</th></tr></thead>
    <tbody>
      <tr style="background-color: #f8f9fa; font-weight: bold;">
        <td>Pre-Retirement Baseline (with COLA growth)</td>
        <td>{{curr (index .Scenarios 0).PreRetirementNet2030}}</td>
        <td>{{curr (index .Scenarios 0).PreRetirementNet2035}}</td>
        <td>{{curr (index .Scenarios 0).PreRetirementNet2040}}</td>
      </tr>
      {{range .Scenarios}}
      <tr>
        <td>{{.Name}}</td>
        <td>{{curr .NetIncome2030}}</td>
        <td>{{curr .NetIncome2035}}</td>
        <td>{{curr .NetIncome2040}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
  <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
    <strong>Note:</strong> This table shows net income for specific calendar years across all scenarios, enabling direct comparison. 
    The baseline shows what your current income would be in those years with COLA (cost-of-living) adjustments.
  </p>
</section>
<section>
  <h2>Recommendation</h2>
  {{with $.Recommendation}}
    {{if .ScenarioName}}
      <p>Best Scenario: <strong>{{.ScenarioName}}</strong> <span class="badge">Î” {{curr .NetIncomeChange}} ({{pct .PercentageChange}})</span></p>
    {{else}}
      <p>No recommendation available.</p>
    {{end}}
  {{end}}
</section>
</body>
</html>
